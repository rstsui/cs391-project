{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ajoha/Downloads/cs391-project/cs391-project/spark-bytes/frontend/src/lib/supabaseClient.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\r\n\r\nexport const supabase = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n);\r\n\r\nsupabase.auth.onAuthStateChange((event, session) => {\r\n  console.log(\"[Auth Event]\", event);\r\n  console.log(\"[Session]\", session);\r\n  console.log(\"URL:\", process.env.NEXT_PUBLIC_SUPABASE_URL);\r\nconsole.log(\"KEY:\", process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY);\r\n\r\n});\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,WAAW,IAAA,qOAAY;AAKpC,SAAS,IAAI,CAAC,iBAAiB,CAAC,CAAC,OAAO;IACtC,QAAQ,GAAG,CAAC,gBAAgB;IAC5B,QAAQ,GAAG,CAAC,aAAa;IACzB,QAAQ,GAAG,CAAC;IACd,QAAQ,GAAG,CAAC;AAEZ","debugId":null}},
    {"offset": {"line": 45, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ajoha/Downloads/cs391-project/cs391-project/spark-bytes/frontend/src/lib/useSupabaseSession.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { supabase } from \"./supabaseClient\";\r\nimport type { Session } from \"@supabase/supabase-js\";\r\n\r\nexport function useSupabaseSession() {\r\n  const [session, setSession] = useState<Session | null>(null);\r\n\r\n  useEffect(() => {\r\n    // Load initial session\r\n    supabase.auth.getSession().then((res) => {\r\n      setSession(res.data.session ?? null);\r\n    });\r\n\r\n    // Listen for login/logout events\r\n    const {\r\n      data: { subscription },\r\n    } = supabase.auth.onAuthStateChange(\r\n      (_event: string, session: Session | null) => {\r\n        setSession(session);\r\n      }\r\n    );\r\n\r\n    return () => subscription.unsubscribe();\r\n  }, []);\r\n\r\n  return session;\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;AAMO,SAAS;IACd,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+OAAQ,EAAiB;IAEvD,IAAA,gPAAS,EAAC;QACR,uBAAuB;QACvB,sKAAQ,CAAC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,CAAC;YAC/B,WAAW,IAAI,IAAI,CAAC,OAAO,IAAI;QACjC;QAEA,iCAAiC;QACjC,MAAM,EACJ,MAAM,EAAE,YAAY,EAAE,EACvB,GAAG,sKAAQ,CAAC,IAAI,CAAC,iBAAiB,CACjC,CAAC,QAAgB;YACf,WAAW;QACb;QAGF,OAAO,IAAM,aAAa,WAAW;IACvC,GAAG,EAAE;IAEL,OAAO;AACT","debugId":null}},
    {"offset": {"line": 73, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ajoha/Downloads/cs391-project/cs391-project/spark-bytes/frontend/src/app/navbar-client.tsx"],"sourcesContent":["\"use client\";\r\nimport { usePathname } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport { useSupabaseSession } from \"@/lib/useSupabaseSession\";\r\nimport { supabase } from \"@/lib/supabaseClient\"\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport default function NavbarClient() {\r\n  const session = useSupabaseSession();\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n\r\n  const [role, setRole] = useState<string | null>(null);\r\n  useEffect(() => {\r\n    async function loadRole() {\r\n      if (!session) return;\r\n\r\n      const { data } = await supabase\r\n        .from(\"profiles\")\r\n        .select(\"role\")\r\n        .eq(\"id\", session.user.id)\r\n        .single();\r\n\r\n      setRole(data?.role ?? null);\r\n    }\r\n    loadRole();\r\n  }, [session]);\r\n  const isActive = (path: string) =>\r\n    pathname === path ? \"underline font-semibold\" : \"hover:underline\";\r\n  useEffect(() => {\r\n    const {\r\n      data: { subscription },\r\n    } = supabase.auth.onAuthStateChange(() => {\r\n      router.refresh();\r\n    });\r\n\r\n    return () => subscription.unsubscribe();\r\n  }, [router]);\r\n  \r\n  return (\r\n    <nav className=\"bg-black text-white flex justify-between items-center px-8 py-4\">\r\n      <span className=\"font-semibold text-lg\">Spark!Bytes</span>\r\n\r\n      <div className=\"flex gap-6 items-center\">\r\n        <Link href=\"/\" className={isActive(\"/\")}>\r\n          Home\r\n        </Link>\r\n\r\n        <Link href=\"/search\" className={isActive(\"/search\")}>\r\n          Events\r\n        </Link>\r\n\r\n        {/* If logged in */}\r\n        {session && (\r\n          <>\r\n            <Link\r\n              href={role === \"admin\" ? \"/create_event\" : \"/request_access\"}\r\n              className={isActive(role === \"admin\" ? \"/create_event\" : \"/request_access\")}\r\n            >\r\n              Create Event\r\n            </Link>\r\n            <Link\r\n              href={role === \"admin\" ? \"/admin/events\" : \"/request_access\"}\r\n              className={isActive(role === \"admin\" ? \"/admin/events\" : \"/request_access\")}\r\n            >\r\n              My Events\r\n            </Link>\r\n\r\n\r\n            <Link\r\n              href=\"/profile_reserve\"\r\n              className={isActive(\"/profile_reserve\")}\r\n            >\r\n              My Reservations\r\n            </Link>\r\n          </>\r\n        )}\r\n        {session && (\r\n        <Link\r\n            href=\"/profile_page\"\r\n            className={pathname === \"/profile_page\" ? \"underline font-semibold\" : \"\"}\r\n        >\r\n            Profile\r\n        </Link>\r\n        )}\r\n        {/* Admin-only: View pending access requests */}\r\n        {session && role === \"admin\" && (\r\n          <Link\r\n            href=\"/admin/requests\"\r\n            className={isActive(\"/admin/requests\")}\r\n          >\r\n            Admin Requests\r\n          </Link>\r\n        )}\r\n\r\n        {/* Auth link */}\r\n        {session ? (\r\n          <Link href=\"/log_out\" className={isActive(\"/log_out\")}>\r\n            Logout\r\n          </Link>\r\n        ) : (\r\n          <Link href=\"/login\" className={isActive(\"/login\")}>\r\n            Login\r\n          </Link>\r\n        )}\r\n      </div>\r\n    </nav>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;AALA;;;;;;;;AAQe,SAAS;IACtB,MAAM,UAAU,IAAA,oLAAkB;IAClC,MAAM,SAAS,IAAA,6KAAS;IACxB,MAAM,WAAW,IAAA,+KAAW;IAE5B,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,+OAAQ,EAAgB;IAChD,IAAA,gPAAS,EAAC;QACR,eAAe;YACb,IAAI,CAAC,SAAS;YAEd,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,sKAAQ,CAC5B,IAAI,CAAC,YACL,MAAM,CAAC,QACP,EAAE,CAAC,MAAM,QAAQ,IAAI,CAAC,EAAE,EACxB,MAAM;YAET,QAAQ,MAAM,QAAQ;QACxB;QACA;IACF,GAAG;QAAC;KAAQ;IACZ,MAAM,WAAW,CAAC,OAChB,aAAa,OAAO,4BAA4B;IAClD,IAAA,gPAAS,EAAC;QACR,MAAM,EACJ,MAAM,EAAE,YAAY,EAAE,EACvB,GAAG,sKAAQ,CAAC,IAAI,CAAC,iBAAiB,CAAC;YAClC,OAAO,OAAO;QAChB;QAEA,OAAO,IAAM,aAAa,WAAW;IACvC,GAAG;QAAC;KAAO;IAEX,qBACE,4QAAC;QAAI,WAAU;;0BACb,4QAAC;gBAAK,WAAU;0BAAwB;;;;;;0BAExC,4QAAC;gBAAI,WAAU;;kCACb,4QAAC,qMAAI;wBAAC,MAAK;wBAAI,WAAW,SAAS;kCAAM;;;;;;kCAIzC,4QAAC,qMAAI;wBAAC,MAAK;wBAAU,WAAW,SAAS;kCAAY;;;;;;oBAKpD,yBACC;;0CACE,4QAAC,qMAAI;gCACH,MAAM,SAAS,UAAU,kBAAkB;gCAC3C,WAAW,SAAS,SAAS,UAAU,kBAAkB;0CAC1D;;;;;;0CAGD,4QAAC,qMAAI;gCACH,MAAM,SAAS,UAAU,kBAAkB;gCAC3C,WAAW,SAAS,SAAS,UAAU,kBAAkB;0CAC1D;;;;;;0CAKD,4QAAC,qMAAI;gCACH,MAAK;gCACL,WAAW,SAAS;0CACrB;;;;;;;;oBAKJ,yBACD,4QAAC,qMAAI;wBACD,MAAK;wBACL,WAAW,aAAa,kBAAkB,4BAA4B;kCACzE;;;;;;oBAKA,WAAW,SAAS,yBACnB,4QAAC,qMAAI;wBACH,MAAK;wBACL,WAAW,SAAS;kCACrB;;;;;;oBAMF,wBACC,4QAAC,qMAAI;wBAAC,MAAK;wBAAW,WAAW,SAAS;kCAAa;;;;;6CAIvD,4QAAC,qMAAI;wBAAC,MAAK;wBAAS,WAAW,SAAS;kCAAW;;;;;;;;;;;;;;;;;;AAO7D","debugId":null}}]
}