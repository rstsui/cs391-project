{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["C:/Users/ajoha/Downloads/cs391-project/cs391-project/spark-bytes/frontend/src/lib/supabaseClient.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\r\n\r\nexport const supabase = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n);\r\n\r\nsupabase.auth.onAuthStateChange((event, session) => {\r\n  console.log(\"[Auth Event]\", event);\r\n  console.log(\"[Session]\", session);\r\n  console.log(\"URL:\", process.env.NEXT_PUBLIC_SUPABASE_URL);\r\nconsole.log(\"KEY:\", process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY);\r\n\r\n});\r\n"],"names":["createClient","supabase","process","env","NEXT_PUBLIC_SUPABASE_URL","NEXT_PUBLIC_SUPABASE_ANON_KEY","auth","onAuthStateChange","event","session","console","log"],"mappings":";;;;AAAA,SAASA,YAAY,QAAQ,uBAAuB;;AAE7C,MAAMC,QAAQ,OAAGD,qOAAY,CAClCE,OAAO,CAACC,GAAG,CAACC,wBAAwB,EACpCF,OAAO,CAACC,GAAG,CAACE,6BACd,CAAC;AAEDJ,QAAQ,CAACK,IAAI,CAACC,iBAAiB,CAAC,CAACC,KAAK,EAAEC,OAAO,KAAK;IAClDC,OAAO,CAACC,GAAG,CAAC,cAAc,EAAEH,KAAK,CAAC;IAClCE,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEF,OAAO,CAAC;IACjCC,OAAO,CAACC,GAAG,CAAC,MAAM,EAAET,OAAO,CAACC,GAAG,CAACC,wBAAwB,CAAC;IAC3DM,OAAO,CAACC,GAAG,CAAC,MAAM,EAAET,OAAO,CAACC,GAAG,CAACE,6BAA6B,CAAC;AAE9D,CAAC,CAAC","ignoreList":[],"debugId":null}},
    {"offset": {"line": 45, "column": 0}, "map": {"version":3,"sources":["C:/Users/ajoha/Downloads/cs391-project/cs391-project/spark-bytes/frontend/src/lib/useSupabaseSession.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { supabase } from \"./supabaseClient\";\r\nimport type { Session } from \"@supabase/supabase-js\";\r\n\r\nexport function useSupabaseSession() {\r\n  const [session, setSession] = useState<Session | null>(null);\r\n\r\n  useEffect(() => {\r\n    // Load initial session\r\n    supabase.auth.getSession().then((res) => {\r\n      setSession(res.data.session ?? null);\r\n    });\r\n\r\n    // Listen for login/logout events\r\n    const {\r\n      data: { subscription },\r\n    } = supabase.auth.onAuthStateChange(\r\n      (_event: string, session: Session | null) => {\r\n        setSession(session);\r\n      }\r\n    );\r\n\r\n    return () => subscription.unsubscribe();\r\n  }, []);\r\n\r\n  return session;\r\n}\r\n"],"names":["useEffect","useState","supabase","useSupabaseSession","session","setSession","auth","getSession","then","res","data","subscription","onAuthStateChange","_event","unsubscribe"],"mappings":";;;;AAEA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,QAAQ,QAAQ,kBAAkB;AAH3C,YAAY;;;AAML,SAASC,kBAAkBA,CAAA,EAAG;IACnC,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,OAAGJ,+OAAQ,EAAiB,IAAI,CAAC;QAE5DD,gPAAS,EAAC,MAAM;QACd,uBAAA;QACAE,sKAAQ,CAACI,IAAI,CAACC,UAAU,CAAC,CAAC,CAACC,IAAI,EAAEC,GAAG,IAAK;YACvCJ,UAAU,CAACI,GAAG,CAACC,IAAI,CAACN,OAAO,IAAI,IAAI,CAAC;QACtC,CAAC,CAAC;QAEF,iCAAA;QACA,MAAM,EACJM,IAAI,EAAE,EAAEC,YAAAA,EAAa,EACtB,GAAGT,sKAAQ,CAACI,IAAI,CAACM,iBAAiB,CACjC,CAACC,MAAc,EAAET,OAAuB,KAAK;YAC3CC,UAAU,CAACD,OAAO,CAAC;QACrB,CACF,CAAC;QAED,OAAO,IAAMO,YAAY,CAACG,WAAW,CAAC,CAAC;IACzC,CAAC,EAAE,EAAE,CAAC;IAEN,OAAOV,OAAO;AAChB","ignoreList":[],"debugId":null}},
    {"offset": {"line": 73, "column": 0}, "map": {"version":3,"sources":["C:/Users/ajoha/Downloads/cs391-project/cs391-project/spark-bytes/frontend/src/app/navbar-client.tsx"],"sourcesContent":["\"use client\";\r\nimport { usePathname } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport { useSupabaseSession } from \"@/lib/useSupabaseSession\";\r\nimport { supabase } from \"@/lib/supabaseClient\"\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport default function NavbarClient() {\r\n  const session = useSupabaseSession();\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n\r\n  const [role, setRole] = useState<string | null>(null);\r\n  useEffect(() => {\r\n    async function loadRole() {\r\n      if (!session) return;\r\n\r\n      const { data } = await supabase\r\n        .from(\"profiles\")\r\n        .select(\"role\")\r\n        .eq(\"id\", session.user.id)\r\n        .single();\r\n\r\n      setRole(data?.role ?? null);\r\n    }\r\n    loadRole();\r\n  }, [session]);\r\n  const isActive = (path: string) =>\r\n    pathname === path ? \"underline font-semibold\" : \"hover:underline\";\r\n  useEffect(() => {\r\n    const {\r\n      data: { subscription },\r\n    } = supabase.auth.onAuthStateChange(() => {\r\n      router.refresh();\r\n    });\r\n\r\n    return () => subscription.unsubscribe();\r\n  }, [router]);\r\n  \r\n  return (\r\n    <nav className=\"bg-black text-white flex justify-between items-center px-8 py-4\">\r\n      <span className=\"font-semibold text-lg\">Spark!Bytes</span>\r\n\r\n      <div className=\"flex gap-6 items-center\">\r\n        <Link href=\"/\" className={isActive(\"/\")}>\r\n          Home\r\n        </Link>\r\n\r\n        <Link href=\"/search\" className={isActive(\"/search\")}>\r\n          Events\r\n        </Link>\r\n\r\n        {/* If logged in */}\r\n        {session && (\r\n          <>\r\n            <Link\r\n              href={role === \"admin\" ? \"/create_event\" : \"/request_access\"}\r\n              className={isActive(role === \"admin\" ? \"/create_event\" : \"/request_access\")}\r\n            >\r\n              Create Event\r\n            </Link>\r\n            <Link\r\n              href={role === \"admin\" ? \"/admin/events\" : \"/request_access\"}\r\n              className={isActive(role === \"admin\" ? \"/admin/events\" : \"/request_access\")}\r\n            >\r\n              My Events\r\n            </Link>\r\n\r\n\r\n            <Link\r\n              href=\"/profile_reserve\"\r\n              className={isActive(\"/profile_reserve\")}\r\n            >\r\n              My Reservations\r\n            </Link>\r\n          </>\r\n        )}\r\n        {session && (\r\n        <Link\r\n            href=\"/profile_page\"\r\n            className={pathname === \"/profile_page\" ? \"underline font-semibold\" : \"\"}\r\n        >\r\n            Profile\r\n        </Link>\r\n        )}\r\n        {/* Admin-only: View pending access requests */}\r\n        {session && role === \"admin\" && (\r\n          <Link\r\n            href=\"/admin/requests\"\r\n            className={isActive(\"/admin/requests\")}\r\n          >\r\n            Admin Requests\r\n          </Link>\r\n        )}\r\n\r\n        {/* Auth link */}\r\n        {session ? (\r\n          <Link href=\"/log_out\" className={isActive(\"/log_out\")}>\r\n            Logout\r\n          </Link>\r\n        ) : (\r\n          <Link href=\"/login\" className={isActive(\"/login\")}>\r\n            Login\r\n          </Link>\r\n        )}\r\n      </div>\r\n    </nav>\r\n  );\r\n}"],"names":["usePathname","Link","useSupabaseSession","supabase","useEffect","useState","useRouter","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","NavbarClient","session","router","pathname","role","setRole","loadRole","data","from","select","eq","user","id","single","isActive","path","subscription","auth","onAuthStateChange","refresh","unsubscribe","className","children","href"],"mappings":"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","ignoreList":[],"debugId":null}}]
}