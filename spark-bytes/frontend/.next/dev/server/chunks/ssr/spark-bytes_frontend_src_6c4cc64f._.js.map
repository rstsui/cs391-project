{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["C:/Users/ajoha/Downloads/cs391-project/cs391-project/spark-bytes/frontend/src/lib/useAuthGuard.ts"],"sourcesContent":["// src/hooks/useAuthGuard.ts\r\n\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { supabase } from \"@/lib/supabaseClient\";\r\nimport type { User } from \"@supabase/supabase-js\";\r\n\r\ntype UseAuthGuardResult = {\r\n  loading: boolean;\r\n  user: User | null;\r\n};\r\n\r\nexport function useAuthGuard({ redirectToLogin = true } = {}): UseAuthGuardResult {\r\n  const router = useRouter();\r\n  const [loading, setLoading] = useState(true);\r\n  const [user, setUser] = useState<User | null>(null);\r\n\r\n  useEffect(() => {\r\n    async function checkUser() {\r\n      const { data } = await supabase.auth.getUser();\r\n      const usr = data?.user || null;\r\n      setUser(usr);\r\n      setLoading(false);\r\n\r\n      if (!usr && redirectToLogin) {\r\n        router.push(\"/login\");\r\n      }\r\n    }\r\n\r\n    checkUser();\r\n  }, [router, redirectToLogin]);\r\n\r\n  return { loading, user };\r\n}\r\n"],"names":["useEffect","useState","useRouter","supabase","useAuthGuard","redirectToLogin","router","loading","setLoading","user","setUser","checkUser","data","auth","getUser","usr","push"],"mappings":"AAAA,4BAAA;;;;;AAGA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,QAAQ,QAAQ,sBAAsB;AAJ/C,YAAY;;;;AAYL,SAASC,YAAYA,CAAC,EAAEC,eAAe,GAAG,IAAA,EAAM,GAAG,CAAC,CAAC,EAAsB;IAChF,MAAMC,MAAM,OAAGJ,6KAAS,CAAC,CAAC;IAC1B,MAAM,CAACK,OAAO,EAAEC,UAAU,CAAC,GAAGP,mPAAQ,EAAC,IAAI,CAAC;IAC5C,MAAM,CAACQ,IAAI,EAAEC,OAAO,CAAC,OAAGT,+OAAQ,EAAc,IAAI,CAAC;QAEnDD,gPAAS,EAAC,MAAM;QACd,eAAeW,SAASA,CAAA,EAAG;YACzB,MAAM,EAAEC,IAAAA,EAAM,GAAG,MAAMT,sKAAQ,CAACU,IAAI,CAACC,OAAO,CAAC,CAAC;YAC9C,MAAMC,GAAG,GAAGH,IAAI,EAAEH,IAAI,IAAI,IAAI;YAC9BC,OAAO,CAACK,GAAG,CAAC;YACZP,UAAU,CAAC,KAAK,CAAC;YAEjB,IAAI,CAACO,GAAG,IAAIV,eAAe,EAAE;gBAC3BC,MAAM,CAACU,IAAI,CAAC,QAAQ,CAAC;YACvB;QACF;QAEAL,SAAS,CAAC,CAAC;IACb,CAAC,EAAE;QAACL,MAAM;QAAED,eAAe;KAAC,CAAC;IAE7B,OAAO;QAAEE,OAAO;QAAEE;IAAK,CAAC;AAC1B","ignoreList":[],"debugId":null}},
    {"offset": {"line": 44, "column": 0}, "map": {"version":3,"sources":["C:/Users/ajoha/Downloads/cs391-project/cs391-project/spark-bytes/frontend/src/app/profile_reserve/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { supabase } from \"@/lib/supabaseClient\";\r\nimport { useAuthGuard } from \"@/lib/useAuthGuard\";\r\n\r\nfunction formatTime(timeString: string) {\r\n  if (!timeString) return \"\";\r\n\r\n  const [hourStr, minuteStr] = timeString.split(\":\");\r\n  let hour = parseInt(hourStr);\r\n  const minute = parseInt(minuteStr);\r\n\r\n  const ampm = hour >= 12 ? \"PM\" : \"AM\";\r\n\r\n  hour = hour % 12;\r\n  if (hour === 0) hour = 12;\r\n\r\n  return `${hour}:${minute.toString().padStart(2, \"0\")} ${ampm}`;\r\n}\r\n\r\ntype FoodItem = {\r\n  name: string;\r\n  quantity: number;\r\n};\r\n\r\nexport default function ProfileReserve() {\r\n  const router = useRouter();\r\n  const { loading: authLoading, user } = useAuthGuard(); // redirect to /login if not auth\r\n\r\n  const [rsvps, setRsvps] = useState<any[]>([]);\r\n  const [events, setEvents] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const [editingRsvp, setEditingRsvp] = useState<any>(null);\r\n  const [editFood, setEditFood] = useState(\"\");\r\n  const [editQuantity, setEditQuantity] = useState(1);\r\n\r\n  useEffect(() => {\r\n    const loadData = async () => {\r\n      if (!user) return;\r\n\r\n      if (!user.email?.endsWith(\"@bu.edu\")) {\r\n        await supabase.auth.signOut();\r\n        alert(\"You must use your BU email to log in.\");\r\n        router.push(\"/login\");\r\n        return;\r\n      }\r\n\r\n      const { data: rsvpData, error: rsvpError } = await supabase\r\n        .from(\"rsvps\")\r\n        .select(\"*, rsvp_items(*)\")\r\n        .eq(\"email\", user.email);\r\n\r\n      if (rsvpError) {\r\n        console.error(\"RSVP fetch error:\", rsvpError);\r\n      }\r\n\r\n      const { data: eventData, error: eventError } = await supabase\r\n        .from(\"events\")\r\n        .select(\"*\");\r\n\r\n      if (eventError) {\r\n        console.error(\"Event fetch error:\", eventError);\r\n      }\r\n\r\n      setRsvps(rsvpData || []);\r\n      setEvents(eventData || []);\r\n      setLoading(false);\r\n    };\r\n\r\n    if (!authLoading && user) {\r\n      loadData();\r\n    }\r\n  }, [authLoading, user, router]);\r\n\r\n  const handleCancel = async (rsvp: any) => {\r\n    const yes = confirm(\"Cancel this reservation?\");\r\n    if (!yes) return;\r\n\r\n    const { data: items, error: itemsError } = await supabase\r\n      .from(\"rsvp_items\")\r\n      .select(\"*\")\r\n      .eq(\"rsvp_id\", rsvp.id);\r\n\r\n    if (itemsError) {\r\n      console.error(itemsError);\r\n      alert(\"Could not load reservation items.\");\r\n      return;\r\n    }\r\n\r\n    const event = events.find((e) => e.id === rsvp.event_id);\r\n    if (!event) {\r\n      alert(\"Event not found.\");\r\n      return;\r\n    }\r\n\r\n    let updatedFood = [...event.food_items];\r\n\r\n    items.forEach((item: any) => {\r\n      updatedFood = updatedFood.map((food: any) =>\r\n        food.name === item.food_item\r\n          ? { ...food, quantity: food.quantity + item.quantity }\r\n          : food\r\n      );\r\n    });\r\n\r\n    const { error: updateError } = await supabase\r\n      .from(\"events\")\r\n      .update({\r\n        food_items: updatedFood,\r\n        attendees: Math.max(0, (event.attendees || 1) - 1),\r\n      })\r\n      .eq(\"id\", event.id);\r\n\r\n    if (updateError) {\r\n      console.error(updateError);\r\n      alert(\"Failed to update event inventory.\");\r\n      return;\r\n    }\r\n\r\n    await supabase.from(\"rsvp_items\").delete().eq(\"rsvp_id\", rsvp.id);\r\n\r\n    const { error: deleteError } = await supabase\r\n      .from(\"rsvps\")\r\n      .delete()\r\n      .eq(\"id\", rsvp.id);\r\n\r\n    if (deleteError) {\r\n      console.error(deleteError);\r\n      alert(\"Failed to delete RSVP.\");\r\n      return;\r\n    }\r\n\r\n    alert(\"Reservation canceled.\");\r\n\r\n    setEvents((prev) =>\r\n      prev.map((e) =>\r\n        e.id === event.id\r\n          ? {\r\n              ...e,\r\n              food_items: updatedFood,\r\n              attendees: event.attendees - 1,\r\n            }\r\n          : e\r\n      )\r\n    );\r\n\r\n    setRsvps((prev) => prev.filter((x) => x.id !== rsvp.id));\r\n  };\r\n\r\n  const handleEditSubmit = async () => {\r\n    if (!editingRsvp) return;\r\n\r\n    const rsvpId = editingRsvp.id;\r\n    const event = events.find((e) => e.id === editingRsvp.event_id);\r\n    if (!event) return;\r\n\r\n    const { data: existingItems, error: loadErr } = await supabase\r\n      .from(\"rsvp_items\")\r\n      .select(\"*\")\r\n      .eq(\"rsvp_id\", rsvpId);\r\n\r\n    if (loadErr) {\r\n      console.error(loadErr);\r\n      alert(\"Failed to load existing items.\");\r\n      return;\r\n    }\r\n\r\n    const oldItem = existingItems.find(\r\n      (i: { food_item: string }) => i.food_item === editFood\r\n    );\r\n    const oldQty = oldItem?.quantity || 0;\r\n    const newQty = editQuantity;\r\n\r\n    if (newQty > 3) {\r\n      alert(\"You may only reserve up to 3 of each item.\");\r\n      return;\r\n    }\r\n\r\n    const updatedFood = event.food_items.map(\r\n      (item: { name: string; quantity: number }) => {\r\n        if (item.name === editFood) {\r\n          return {\r\n            ...item,\r\n            quantity: item.quantity + oldQty - newQty,\r\n          };\r\n        }\r\n        return item;\r\n      }\r\n    );\r\n\r\n    if (updatedFood.some((i: { quantity: number }) => i.quantity < 0)) {\r\n      alert(\"Not enough quantity available.\");\r\n      return;\r\n    }\r\n\r\n    if (newQty === 0 && oldItem) {\r\n      await supabase.from(\"rsvp_items\").delete().eq(\"id\", oldItem.id);\r\n\r\n      await supabase\r\n        .from(\"events\")\r\n        .update({ food_items: updatedFood })\r\n        .eq(\"id\", event.id);\r\n\r\n      alert(\"Item removed!\");\r\n\r\n      setEvents((prev) =>\r\n        prev.map((ev) =>\r\n          ev.id === event.id ? { ...ev, food_items: updatedFood } : ev\r\n        )\r\n      );\r\n\r\n      setRsvps((prev) =>\r\n        prev.map((r) =>\r\n          r.id === rsvpId\r\n            ? {\r\n                ...r,\r\n                rsvp_items: existingItems.filter(\r\n                  (it: any) => it.food_item !== editFood\r\n                ),\r\n              }\r\n            : r\r\n        )\r\n      );\r\n\r\n      setEditingRsvp(null);\r\n      return;\r\n    }\r\n\r\n    if (oldItem) {\r\n      await supabase\r\n        .from(\"rsvp_items\")\r\n        .update({ quantity: newQty })\r\n        .eq(\"id\", oldItem.id);\r\n    } else {\r\n      await supabase.from(\"rsvp_items\").insert({\r\n        rsvp_id: rsvpId,\r\n        food_item: editFood,\r\n        quantity: newQty,\r\n      });\r\n    }\r\n\r\n    await supabase\r\n      .from(\"events\")\r\n      .update({ food_items: updatedFood })\r\n      .eq(\"id\", event.id);\r\n\r\n    alert(\"Reservation item updated!\");\r\n\r\n    const updatedItems = oldItem\r\n      ? existingItems.map((it: any) =>\r\n          it.food_item === editFood ? { ...it, quantity: newQty } : it\r\n        )\r\n      : [...existingItems, { food_item: editFood, quantity: newQty }];\r\n\r\n    setEvents((prev) =>\r\n      prev.map((ev) =>\r\n        ev.id === event.id ? { ...ev, food_items: updatedFood } : ev\r\n      )\r\n    );\r\n\r\n    setRsvps((prev) =>\r\n      prev.map((r) =>\r\n        r.id === rsvpId ? { ...r, rsvp_items: updatedItems } : r\r\n      )\r\n    );\r\n\r\n    setEditingRsvp(null);\r\n  };\r\n\r\n  if (authLoading || loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center text-lg\">\r\n        Loading reservations…\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!user) return null;\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-gradient-to-b from-white via-teal-50 to-teal-100\">\r\n      <main className=\"flex-1 px-10 py-16 max-w-6xl mx-auto w-full\">\r\n        <h1 className=\"text-3xl font-semibold text-center mb-2\">\r\n          My Reservations\r\n        </h1>\r\n        <p className=\"text-lg text-center mb-12\">\r\n          Food pickups you have reserved\r\n        </p>\r\n\r\n        <section className=\"flex flex-wrap justify-center gap-6 px-8 pb-12 mt-10\">\r\n          {rsvps.length === 0 && (\r\n            <p className=\"text-gray-700 text-center\">\r\n              You have no reservations yet.\r\n            </p>\r\n          )}\r\n\r\n          {rsvps.map((rsvp) => {\r\n            const event = events.find((e) => e.id === rsvp.event_id);\r\n\r\n            return (\r\n              <div\r\n                key={rsvp.id}\r\n                className=\"bg-white border border-black w-72 p-6 rounded-2xl shadow-sm\"\r\n              >\r\n                <h2 className=\"text-xl font-semibold\">{event?.title}</h2>\r\n\r\n                <p className=\"mt-3 text-gray-700\">\r\n                  <strong>Date:</strong> {event?.event_date}\r\n                </p>\r\n\r\n                <p className=\"text-gray-700\">\r\n                  <strong>Time:</strong> {formatTime(event?.event_time)}\r\n                </p>\r\n\r\n                <p className=\"text-gray-700\">\r\n                  <strong>Location:</strong> {event?.location}\r\n                </p>\r\n\r\n                <p className=\"text-gray-700 mt-3\">\r\n                  <strong>Items:</strong>\r\n                </p>\r\n                {rsvp.rsvp_items && rsvp.rsvp_items.length > 0 ? (\r\n                  <ul className=\"list-disc ml-5 text-gray-700\">\r\n                    {rsvp.rsvp_items.map((item: any) => (\r\n                      <li key={item.id}>\r\n                        {item.food_item} &times; {item.quantity}\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                ) : (\r\n                  <p className=\"text-gray-700\">No items reserved.</p>\r\n                )}\r\n\r\n                <div className=\"flex gap-3 mt-6\">\r\n                  <button\r\n                    onClick={() => handleCancel(rsvp)}\r\n                    className=\"bg-red-500 text-white px-4 py-1 rounded-md hover:bg-red-600\"\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n\r\n                  <button\r\n                    onClick={() => {\r\n                      setEditingRsvp(rsvp);\r\n                      const firstItem = rsvp.rsvp_items?.[0];\r\n                      setEditFood(firstItem?.food_item || \"\");\r\n                      setEditQuantity(firstItem?.quantity || 1);\r\n                    }}\r\n                    className=\"bg-gray-200 text-gray-800 px-4 py-1 rounded-md hover:bg-gray-300\"\r\n                  >\r\n                    Edit\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </section>\r\n      </main>\r\n\r\n      {editingRsvp && (\r\n        <div className=\"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-50\">\r\n          <div className=\"bg-white p-6 rounded-xl w-96 shadow-xl\">\r\n            <h2 className=\"text-xl font-semibold mb-4\">\r\n              Edit Reservation —{\" \"}\r\n              {events.find((e) => e.id === editingRsvp.event_id)?.title}\r\n            </h2>\r\n\r\n            <label className=\"block font-medium mb-1\">Food Item</label>\r\n            <select\r\n              value={editFood || \"\"}\r\n              onChange={(e) => setEditFood(e.target.value)}\r\n              className=\"border w-full px-3 py-2 rounded mb-4\"\r\n            >\r\n              {events\r\n                .find((e) => e.id === editingRsvp.event_id)\r\n                ?.food_items.map((item: any) => (\r\n                  <option key={item.name} value={item.name}>\r\n                    {item.name} ({item.quantity} left)\r\n                  </option>\r\n                ))}\r\n            </select>\r\n\r\n            <label className=\"block font-medium mb-1\">\r\n              Quantity (max 3)\r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              min={1}\r\n              max={3}\r\n              value={editQuantity}\r\n              onChange={(e) => setEditQuantity(Number(e.target.value))}\r\n              className=\"border w-full px-3 py-2 rounded mb-6\"\r\n            />\r\n\r\n            <div className=\"flex justify-between\">\r\n              <button\r\n                onClick={() => setEditingRsvp(null)}\r\n                className=\"px-4 py-2 bg-gray-300 rounded hover:bg-gray-400\"\r\n              >\r\n                Close\r\n              </button>\r\n\r\n              <button\r\n                onClick={handleEditSubmit}\r\n                className=\"px-4 py-2 bg-teal-600 text-white rounded hover:bg-teal-700\"\r\n              >\r\n                Save Changes\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <footer className=\"bg-black text-white text-center text-sm py-6 px-4 mt-auto\">\r\n        <p>\r\n          Boston University Center of Computing & Data Sciences: Duan Family\r\n          Spark! Initiative\r\n        </p>\r\n        <p>665 Commonwealth Ave., Boston, MA 02215 | Floor 2, Spark! Space</p>\r\n        <p>buspark@bu.edu</p>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["useEffect","useState","useRouter","supabase","useAuthGuard","jsx","_jsx","jsxs","_jsxs","formatTime","timeString","hourStr","minuteStr","split","hour","parseInt","minute","ampm","toString","padStart","ProfileReserve","router","loading","authLoading","user","rsvps","setRsvps","events","setEvents","setLoading","editingRsvp","setEditingRsvp","editFood","setEditFood","editQuantity","setEditQuantity","loadData","email","endsWith","auth","signOut","alert","push","data","rsvpData","error","rsvpError","from","select","eq","console","eventData","eventError","handleCancel","rsvp","yes","confirm","items","itemsError","id","event","find","e","event_id","updatedFood","food_items","forEach","item","map","food","name","food_item","quantity","updateError","update","attendees","Math","max","delete","deleteError","prev","filter","x","handleEditSubmit","rsvpId","existingItems","loadErr","oldItem","i","oldQty","newQty","some","ev","r","rsvp_items","it","insert","rsvp_id","updatedItems","className","children","length","title","event_date","event_time","location","onClick","firstItem","value","onChange","target","type","min","Number"],"mappings":"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","ignoreList":[],"debugId":null}}]
}