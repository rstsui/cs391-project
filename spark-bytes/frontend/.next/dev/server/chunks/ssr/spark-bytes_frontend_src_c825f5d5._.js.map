{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ajoha/Downloads/cs391-project/cs391-project/spark-bytes/frontend/src/lib/useAdminGuard.ts"],"sourcesContent":["// src/hooks/useAdminGuard.ts\r\n\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { supabase } from \"@/lib/supabaseClient\";\r\n\r\ntype UseAdminGuardResult = {\r\n  loading: boolean;\r\n  authorized: boolean;\r\n};\r\n\r\nexport function useAdminGuard(): UseAdminGuardResult {\r\n  const router = useRouter();\r\n  const [loading, setLoading] = useState(true);\r\n  const [authorized, setAuthorized] = useState(false);\r\n\r\n  useEffect(() => {\r\n    async function checkAccess() {\r\n      setLoading(true);\r\n\r\n      const { data: authData } = await supabase.auth.getUser();\r\n      const user = authData?.user;\r\n\r\n      if (!user) {\r\n        router.push(\"/login\");\r\n        return;\r\n      }\r\n\r\n      const { data: profile, error } = await supabase\r\n        .from(\"profiles\")\r\n        .select(\"role\")\r\n        .eq(\"id\", user.id)\r\n        .maybeSingle();\r\n\r\n      if (error) {\r\n        console.error(\"Profile loading error:\", error);\r\n        router.push(\"/login\");\r\n        return;\r\n      }\r\n\r\n      if (!profile) {\r\n        await supabase\r\n          .from(\"profiles\")\r\n          .insert([{ id: user.id, email: user.email, role: \"user\" }]);\r\n\r\n        router.push(\"/request_access\");\r\n        return;\r\n      }\r\n\r\n      if (profile.role !== \"admin\") {\r\n        router.push(\"/request_access\");\r\n        return;\r\n      }\r\n\r\n      setAuthorized(true);\r\n      setLoading(false);\r\n    }\r\n\r\n    checkAccess();\r\n  }, [router]);\r\n\r\n  return { loading, authorized };\r\n}\r\n"],"names":[],"mappings":"AAAA,6BAA6B;;;;;AAG7B;AACA;AACA;AAJA;;;;AAWO,SAAS;IACd,MAAM,SAAS,IAAA,6KAAS;IACxB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+OAAQ,EAAC;IACvC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,+OAAQ,EAAC;IAE7C,IAAA,gPAAS,EAAC;QACR,eAAe;YACb,WAAW;YAEX,MAAM,EAAE,MAAM,QAAQ,EAAE,GAAG,MAAM,sKAAQ,CAAC,IAAI,CAAC,OAAO;YACtD,MAAM,OAAO,UAAU;YAEvB,IAAI,CAAC,MAAM;gBACT,OAAO,IAAI,CAAC;gBACZ;YACF;YAEA,MAAM,EAAE,MAAM,OAAO,EAAE,KAAK,EAAE,GAAG,MAAM,sKAAQ,CAC5C,IAAI,CAAC,YACL,MAAM,CAAC,QACP,EAAE,CAAC,MAAM,KAAK,EAAE,EAChB,WAAW;YAEd,IAAI,OAAO;gBACT,QAAQ,KAAK,CAAC,0BAA0B;gBACxC,OAAO,IAAI,CAAC;gBACZ;YACF;YAEA,IAAI,CAAC,SAAS;gBACZ,MAAM,sKAAQ,CACX,IAAI,CAAC,YACL,MAAM,CAAC;oBAAC;wBAAE,IAAI,KAAK,EAAE;wBAAE,OAAO,KAAK,KAAK;wBAAE,MAAM;oBAAO;iBAAE;gBAE5D,OAAO,IAAI,CAAC;gBACZ;YACF;YAEA,IAAI,QAAQ,IAAI,KAAK,SAAS;gBAC5B,OAAO,IAAI,CAAC;gBACZ;YACF;YAEA,cAAc;YACd,WAAW;QACb;QAEA;IACF,GAAG;QAAC;KAAO;IAEX,OAAO;QAAE;QAAS;IAAW;AAC/B","debugId":null}},
    {"offset": {"line": 66, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ajoha/Downloads/cs391-project/cs391-project/spark-bytes/frontend/src/app/create_event/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { supabase } from \"@/lib/supabaseClient\";\r\nimport { useAdminGuard } from \"@/lib/useAdminGuard\";\r\n\r\ntype FoodItem = {\r\n  name: string;\r\n  quantity: string;\r\n};\r\n\r\nexport default function CreateEvent() {\r\n  const router = useRouter();\r\n\r\n  const { loading, authorized } = useAdminGuard();\r\n\r\n  const [eventName, setEventName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [location, setLocation] = useState(\"\");\r\n  const [date, setDate] = useState(\"\");\r\n  const [time, setTime] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [capacity, setCapacity] = useState(50);\r\n\r\n  const [foodItems, setFoodItems] = useState<FoodItem[]>([\r\n    { name: \"\", quantity: \"\" },\r\n  ]);\r\n\r\n  // --------------------------\r\n  // FOOD ITEM HELPERS\r\n  // --------------------------\r\n  const addFoodItem = () => {\r\n    setFoodItems((prev) => [...prev, { name: \"\", quantity: \"\" }]);\r\n  };\r\n\r\n  const updateFoodItem = (\r\n    index: number,\r\n    field: \"name\" | \"quantity\",\r\n    value: string\r\n  ) => {\r\n    const updated = [...foodItems];\r\n    updated[index][field] = value;\r\n    setFoodItems(updated);\r\n  };\r\n\r\n  const removeFoodItem = (index: number) => {\r\n    setFoodItems(foodItems.filter((_, i) => i !== index));\r\n  };\r\n\r\n  // --------------------------\r\n  // SUBMIT EVENT\r\n  // --------------------------\r\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n\r\n    const cleanFoodItems = foodItems\r\n      .filter((item) => item.name.trim() !== \"\" && item.quantity !== \"\")\r\n      .map((item) => ({\r\n        name: item.name.trim(),\r\n        quantity: Number(item.quantity),\r\n      }));\r\n\r\n    const { error } = await supabase.from(\"events\").insert({\r\n      title: eventName,\r\n      organizer_email: email,\r\n      location,\r\n      event_date: date,\r\n      event_time: time,\r\n      description,\r\n      food_items: cleanFoodItems,\r\n      capacity,\r\n      attendees: 0, // new events start with 0 attendees\r\n      created_at: new Date().toISOString(),\r\n    });\r\n\r\n    if (error) {\r\n      console.error(error);\r\n      alert(\"Failed to create event.\");\r\n      return;\r\n    }\r\n\r\n    alert(\"Event created!\");\r\n    router.push(\"/profile_reserve\");\r\n  };\r\n\r\n  // --------------------------\r\n  // LOADING + AUTH GUARD\r\n  // --------------------------\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center text-lg\">\r\n        Checking access...\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // useAdminGuard already redirected if not admin; render nothing here\r\n  if (!authorized) return null;\r\n\r\n  // --------------------------\r\n  // PAGE UI\r\n  // --------------------------\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-gradient-to-b from-white via-teal-50 to-teal-100\">\r\n      <section className=\"flex flex-col items-center justify-center flex-grow px-4\">\r\n        <div className=\"bg-white rounded-2xl shadow-md p-8 w-full max-w-lg\">\r\n          <h2 className=\"text-2xl font-semibold text-center mb-6\">\r\n            Create an Event\r\n          </h2>\r\n\r\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n            {/* Event Name */}\r\n            <div>\r\n              <label className=\"block text-gray-700 mb-1\">Event Name</label>\r\n              <input\r\n                type=\"text\"\r\n                value={eventName}\r\n                onChange={(e) => setEventName(e.target.value)}\r\n                required\r\n                className=\"w-full border border-gray-300 rounded-lg px-4 py-2\"\r\n              />\r\n            </div>\r\n\r\n            {/* Organizer */}\r\n            <div>\r\n              <label className=\"block text-gray-700 mb-1\">\r\n                Organizer Email\r\n              </label>\r\n              <input\r\n                type=\"email\"\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n                required\r\n                className=\"w-full border border-gray-300 rounded-lg px-4 py-2\"\r\n              />\r\n            </div>\r\n\r\n            {/* Description */}\r\n            <div>\r\n              <label className=\"block text-gray-700 mb-1\">\r\n                Event Description\r\n              </label>\r\n              <textarea\r\n                value={description}\r\n                onChange={(e) => setDescription(e.target.value)}\r\n                required\r\n                className=\"w-full border border-gray-300 rounded-lg px-4 py-2 h-24\"\r\n              />\r\n            </div>\r\n\r\n            {/* Location */}\r\n            <div>\r\n              <label className=\"block text-gray-700 mb-1\">\r\n                Location (please enter complete address or building name)\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={location}\r\n                onChange={(e) => setLocation(e.target.value)}\r\n                required\r\n                className=\"w-full border border-gray-300 rounded-lg px-4 py-2\"\r\n              />\r\n            </div>\r\n\r\n            {/* Date */}\r\n            <div>\r\n              <label className=\"block text-gray-700 mb-1\">Date</label>\r\n              <input\r\n                type=\"date\"\r\n                value={date}\r\n                onChange={(e) => setDate(e.target.value)}\r\n                required\r\n                className=\"w-full border border-gray-300 rounded-lg px-4 py-2\"\r\n              />\r\n            </div>\r\n\r\n            {/* Time */}\r\n            <div>\r\n              <label className=\"block text-gray-700 mb-1\">Time</label>\r\n              <input\r\n                type=\"time\"\r\n                value={time}\r\n                onChange={(e) => setTime(e.target.value)}\r\n                required\r\n                className=\"w-full border border-gray-300 rounded-lg px-4 py-2\"\r\n              />\r\n            </div>\r\n\r\n            {/* Capacity */}\r\n            <div>\r\n              <label className=\"block text-gray-700 mb-1\">Capacity</label>\r\n              <input\r\n                type=\"number\"\r\n                min={1}\r\n                value={capacity}\r\n                onChange={(e) => setCapacity(Number(e.target.value))}\r\n                required\r\n                className=\"w-full border border-gray-300 rounded-lg px-4 py-2\"\r\n              />\r\n            </div>\r\n\r\n            {/* Food Items */}\r\n            <div>\r\n              <label className=\"block text-gray-700 mb-2\">Food Items</label>\r\n\r\n              {foodItems.map((item, index) => (\r\n                <div key={index} className=\"flex gap-2 mb-2 items-center\">\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Food name\"\r\n                    value={item.name}\r\n                    onChange={(e) =>\r\n                      updateFoodItem(index, \"name\", e.target.value)\r\n                    }\r\n                    required\r\n                    className=\"flex-1 border border-gray-300 rounded-lg px-3 py-2\"\r\n                  />\r\n\r\n                  <input\r\n                    type=\"number\"\r\n                    placeholder=\"Qty\"\r\n                    value={item.quantity}\r\n                    onChange={(e) =>\r\n                      updateFoodItem(index, \"quantity\", e.target.value)\r\n                    }\r\n                    required\r\n                    className=\"w-24 border border-gray-300 rounded-lg px-3 py-2\"\r\n                  />\r\n\r\n                  {foodItems.length > 1 && (\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => removeFoodItem(index)}\r\n                      className=\"text-red-500 text-lg font-bold px-2\"\r\n                    >\r\n                      âœ•\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              ))}\r\n\r\n              <button\r\n                type=\"button\"\r\n                onClick={addFoodItem}\r\n                className=\"mt-2 text-sm text-teal-600 font-semibold\"\r\n              >\r\n                + Add another food item\r\n              </button>\r\n            </div>\r\n\r\n            {/* Submit */}\r\n            <button\r\n              type=\"submit\"\r\n              className=\"w-full bg-teal-600 text-white py-2 rounded-lg hover:bg-teal-700\"\r\n            >\r\n              Submit\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </section>\r\n\r\n      <footer className=\"bg-black text-white text-center text-sm py-6 mt-auto\">\r\n        <p>Boston University Center of Computing & Data Sciences:</p>\r\n        <p>Duan Family Spark! Initiative</p>\r\n        <p>buspark@bu.edu</p>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}