{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ajoha/Downloads/cs391-project/cs391-project/spark-bytes/frontend/src/lib/useAdminGuard.ts"],"sourcesContent":["// src/hooks/useAdminGuard.ts\r\n\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { supabase } from \"@/lib/supabaseClient\";\r\n\r\ntype UseAdminGuardResult = {\r\n  loading: boolean;\r\n  authorized: boolean;\r\n};\r\n\r\nexport function useAdminGuard(): UseAdminGuardResult {\r\n  const router = useRouter();\r\n  const [loading, setLoading] = useState(true);\r\n  const [authorized, setAuthorized] = useState(false);\r\n\r\n  useEffect(() => {\r\n    async function checkAccess() {\r\n      setLoading(true);\r\n\r\n      const { data: authData } = await supabase.auth.getUser();\r\n      const user = authData?.user;\r\n\r\n      if (!user) {\r\n        router.push(\"/login\");\r\n        return;\r\n      }\r\n\r\n      const { data: profile, error } = await supabase\r\n        .from(\"profiles\")\r\n        .select(\"role\")\r\n        .eq(\"id\", user.id)\r\n        .maybeSingle();\r\n\r\n      if (error) {\r\n        console.error(\"Profile loading error:\", error);\r\n        router.push(\"/login\");\r\n        return;\r\n      }\r\n\r\n      if (!profile) {\r\n        await supabase\r\n          .from(\"profiles\")\r\n          .insert([{ id: user.id, email: user.email, role: \"user\" }]);\r\n\r\n        router.push(\"/request_access\");\r\n        return;\r\n      }\r\n\r\n      if (profile.role !== \"admin\") {\r\n        router.push(\"/request_access\");\r\n        return;\r\n      }\r\n\r\n      setAuthorized(true);\r\n      setLoading(false);\r\n    }\r\n\r\n    checkAccess();\r\n  }, [router]);\r\n\r\n  return { loading, authorized };\r\n}\r\n"],"names":[],"mappings":"AAAA,6BAA6B;;;;;AAG7B;AACA;AACA;AAJA;;;;AAWO,SAAS;IACd,MAAM,SAAS,IAAA,6KAAS;IACxB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+OAAQ,EAAC;IACvC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,+OAAQ,EAAC;IAE7C,IAAA,gPAAS,EAAC;QACR,eAAe;YACb,WAAW;YAEX,MAAM,EAAE,MAAM,QAAQ,EAAE,GAAG,MAAM,sKAAQ,CAAC,IAAI,CAAC,OAAO;YACtD,MAAM,OAAO,UAAU;YAEvB,IAAI,CAAC,MAAM;gBACT,OAAO,IAAI,CAAC;gBACZ;YACF;YAEA,MAAM,EAAE,MAAM,OAAO,EAAE,KAAK,EAAE,GAAG,MAAM,sKAAQ,CAC5C,IAAI,CAAC,YACL,MAAM,CAAC,QACP,EAAE,CAAC,MAAM,KAAK,EAAE,EAChB,WAAW;YAEd,IAAI,OAAO;gBACT,QAAQ,KAAK,CAAC,0BAA0B;gBACxC,OAAO,IAAI,CAAC;gBACZ;YACF;YAEA,IAAI,CAAC,SAAS;gBACZ,MAAM,sKAAQ,CACX,IAAI,CAAC,YACL,MAAM,CAAC;oBAAC;wBAAE,IAAI,KAAK,EAAE;wBAAE,OAAO,KAAK,KAAK;wBAAE,MAAM;oBAAO;iBAAE;gBAE5D,OAAO,IAAI,CAAC;gBACZ;YACF;YAEA,IAAI,QAAQ,IAAI,KAAK,SAAS;gBAC5B,OAAO,IAAI,CAAC;gBACZ;YACF;YAEA,cAAc;YACd,WAAW;QACb;QAEA;IACF,GAAG;QAAC;KAAO;IAEX,OAAO;QAAE;QAAS;IAAW;AAC/B","debugId":null}},
    {"offset": {"line": 66, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ajoha/Downloads/cs391-project/cs391-project/spark-bytes/frontend/src/app/event_organizer/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Image from \"next/image\";\r\nimport Link from \"next/link\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { supabase } from \"@/lib/supabaseClient\";\r\nimport { useAdminGuard } from \"@/lib/useAdminGuard\";\r\n\r\nexport default function EventOrganizer() {\r\n  const { loading, authorized } = useAdminGuard();\r\n\r\n  const [rsvps, setRsvps] = useState<\r\n    { name: string; food_item: string | null; quantity: number }[]\r\n  >([]);\r\n\r\n  useEffect(() => {\r\n    if (!authorized) return;\r\n\r\n    async function loadRSVPs() {\r\n      const { data, error } = await supabase\r\n        .from(\"rsvps\")\r\n        .select(\"name, food_item, quantity\");\r\n\r\n      if (error) {\r\n        console.error(\"Error loading RSVPs:\", error);\r\n      } else {\r\n        setRsvps(data || []);\r\n      }\r\n    }\r\n\r\n    loadRSVPs();\r\n  }, [authorized]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"p-10 text-center\">\r\n        Checking accessâ€¦\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!authorized) return null;\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col\">\r\n      <section className=\"flex-grow px-8 py-12\">\r\n        <h1 className=\"text-3xl font-bold mb-6 text-center text-gray-800\">\r\n          Event Sign-Up Overview\r\n        </h1>\r\n\r\n        <div className=\"overflow-x-auto bg-white shadow-md rounded-2xl p-6 border border-gray-200\">\r\n          <table className=\"min-w-full text-left text-gray-800\">\r\n            <thead className=\"bg-gray-100\">\r\n              <tr>\r\n                <th className=\"py-3 px-4 border-b font-semibold\">Name</th>\r\n                <th className=\"py-3 px-4 border-b font-semibold\">Food Type</th>\r\n                <th className=\"py-3 px-4 border-b font-semibold\">Amount</th>\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody>\r\n              {rsvps.length === 0 ? (\r\n                <tr>\r\n                  <td className=\"py-3 px-4 border-b text-center\" colSpan={3}>\r\n                    No RSVPs yet.\r\n                  </td>\r\n                </tr>\r\n              ) : (\r\n                rsvps.map((item, index) => (\r\n                  <tr key={index}>\r\n                    <td className=\"py-3 px-4 border-b\">{item.name}</td>\r\n                    <td className=\"py-3 px-4 border-b\">{item.food_item}</td>\r\n                    <td className=\"py-3 px-4 border-b\">{item.quantity}</td>\r\n                  </tr>\r\n                ))\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </section>\r\n\r\n      <footer className=\"bg-black text-white text-center text-sm py-6 px-4 mt-auto\">\r\n        <p>Boston University Center of Computing & Data Sciences: Duan Family Spark! Initiative</p>\r\n        <p>665 Commonwealth Ave., Boston, MA 02215 | Floor 2, Spark! Space</p>\r\n        <p>buspark@bu.edu</p>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAIA;AACA;AACA;AANA;;;;;AAQe,SAAS;IACtB,MAAM,EAAE,OAAO,EAAE,UAAU,EAAE,GAAG,IAAA,0KAAa;IAE7C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+OAAQ,EAEhC,EAAE;IAEJ,IAAA,gPAAS,EAAC;QACR,IAAI,CAAC,YAAY;QAEjB,eAAe;YACb,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,sKAAQ,CACnC,IAAI,CAAC,SACL,MAAM,CAAC;YAEV,IAAI,OAAO;gBACT,QAAQ,KAAK,CAAC,wBAAwB;YACxC,OAAO;gBACL,SAAS,QAAQ,EAAE;YACrB;QACF;QAEA;IACF,GAAG;QAAC;KAAW;IAEf,IAAI,SAAS;QACX,qBACE,4QAAC;YAAI,WAAU;sBAAmB;;;;;;IAItC;IAEA,IAAI,CAAC,YAAY,OAAO;IAExB,qBACE,4QAAC;QAAI,WAAU;;0BACb,4QAAC;gBAAQ,WAAU;;kCACjB,4QAAC;wBAAG,WAAU;kCAAoD;;;;;;kCAIlE,4QAAC;wBAAI,WAAU;kCACb,cAAA,4QAAC;4BAAM,WAAU;;8CACf,4QAAC;oCAAM,WAAU;8CACf,cAAA,4QAAC;;0DACC,4QAAC;gDAAG,WAAU;0DAAmC;;;;;;0DACjD,4QAAC;gDAAG,WAAU;0DAAmC;;;;;;0DACjD,4QAAC;gDAAG,WAAU;0DAAmC;;;;;;;;;;;;;;;;;8CAIrD,4QAAC;8CACE,MAAM,MAAM,KAAK,kBAChB,4QAAC;kDACC,cAAA,4QAAC;4CAAG,WAAU;4CAAiC,SAAS;sDAAG;;;;;;;;;;+CAK7D,MAAM,GAAG,CAAC,CAAC,MAAM,sBACf,4QAAC;;8DACC,4QAAC;oDAAG,WAAU;8DAAsB,KAAK,IAAI;;;;;;8DAC7C,4QAAC;oDAAG,WAAU;8DAAsB,KAAK,SAAS;;;;;;8DAClD,4QAAC;oDAAG,WAAU;8DAAsB,KAAK,QAAQ;;;;;;;2CAH1C;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAYrB,4QAAC;gBAAO,WAAU;;kCAChB,4QAAC;kCAAE;;;;;;kCACH,4QAAC;kCAAE;;;;;;kCACH,4QAAC;kCAAE;;;;;;;;;;;;;;;;;;AAIX","debugId":null}}]
}