{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["C:/Users/ajoha/Downloads/cs391-project/cs391-project/spark-bytes/frontend/src/lib/useAdminGuard.ts"],"sourcesContent":["// src/hooks/useAdminGuard.ts\r\n\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { supabase } from \"@/lib/supabaseClient\";\r\n\r\ntype UseAdminGuardResult = {\r\n  loading: boolean;\r\n  authorized: boolean;\r\n};\r\n\r\nexport function useAdminGuard(): UseAdminGuardResult {\r\n  const router = useRouter();\r\n  const [loading, setLoading] = useState(true);\r\n  const [authorized, setAuthorized] = useState(false);\r\n\r\n  useEffect(() => {\r\n    async function checkAccess() {\r\n      setLoading(true);\r\n\r\n      const { data: authData } = await supabase.auth.getUser();\r\n      const user = authData?.user;\r\n\r\n      if (!user) {\r\n        router.push(\"/login\");\r\n        return;\r\n      }\r\n\r\n      const { data: profile, error } = await supabase\r\n        .from(\"profiles\")\r\n        .select(\"role\")\r\n        .eq(\"id\", user.id)\r\n        .maybeSingle();\r\n\r\n      if (error) {\r\n        console.error(\"Profile loading error:\", error);\r\n        router.push(\"/login\");\r\n        return;\r\n      }\r\n\r\n      if (!profile) {\r\n        await supabase\r\n          .from(\"profiles\")\r\n          .insert([{ id: user.id, email: user.email, role: \"user\" }]);\r\n\r\n        router.push(\"/request_access\");\r\n        return;\r\n      }\r\n\r\n      if (profile.role !== \"admin\") {\r\n        router.push(\"/request_access\");\r\n        return;\r\n      }\r\n\r\n      setAuthorized(true);\r\n      setLoading(false);\r\n    }\r\n\r\n    checkAccess();\r\n  }, [router]);\r\n\r\n  return { loading, authorized };\r\n}\r\n"],"names":["c","_c","useEffect","useState","useRouter","supabase","UseAdminGuardResult","loading","authorized","useAdminGuard","$","$i","Symbol","for","router","setLoading","setAuthorized","t0","t1","useAdminGuard[useEffect()]","checkAccess","data","authData","auth","getUser","user","push","profile","error","from","select","eq","id","maybeSingle","console","insert","email","role","t2"],"mappings":"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","ignoreList":[],"debugId":null}},
    {"offset": {"line": 108, "column": 0}, "map": {"version":3,"sources":["C:/Users/ajoha/Downloads/cs391-project/cs391-project/spark-bytes/frontend/src/app/event_organizer/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Image from \"next/image\";\r\nimport Link from \"next/link\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { supabase } from \"@/lib/supabaseClient\";\r\nimport { useAdminGuard } from \"@/lib/useAdminGuard\";\r\n\r\nexport default function EventOrganizer() {\r\n  const { loading, authorized } = useAdminGuard();\r\n\r\n  const [rsvps, setRsvps] = useState<\r\n    { name: string; food_item: string | null; quantity: number }[]\r\n  >([]);\r\n\r\n  useEffect(() => {\r\n    if (!authorized) return;\r\n\r\n    async function loadRSVPs() {\r\n      const { data, error } = await supabase\r\n        .from(\"rsvps\")\r\n        .select(\"name, food_item, quantity\");\r\n\r\n      if (error) {\r\n        console.error(\"Error loading RSVPs:\", error);\r\n      } else {\r\n        setRsvps(data || []);\r\n      }\r\n    }\r\n\r\n    loadRSVPs();\r\n  }, [authorized]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"p-10 text-center\">\r\n        Checking accessâ€¦\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!authorized) return null;\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col\">\r\n      <section className=\"flex-grow px-8 py-12\">\r\n        <h1 className=\"text-3xl font-bold mb-6 text-center text-gray-800\">\r\n          Event Sign-Up Overview\r\n        </h1>\r\n\r\n        <div className=\"overflow-x-auto bg-white shadow-md rounded-2xl p-6 border border-gray-200\">\r\n          <table className=\"min-w-full text-left text-gray-800\">\r\n            <thead className=\"bg-gray-100\">\r\n              <tr>\r\n                <th className=\"py-3 px-4 border-b font-semibold\">Name</th>\r\n                <th className=\"py-3 px-4 border-b font-semibold\">Food Type</th>\r\n                <th className=\"py-3 px-4 border-b font-semibold\">Amount</th>\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody>\r\n              {rsvps.length === 0 ? (\r\n                <tr>\r\n                  <td className=\"py-3 px-4 border-b text-center\" colSpan={3}>\r\n                    No RSVPs yet.\r\n                  </td>\r\n                </tr>\r\n              ) : (\r\n                rsvps.map((item, index) => (\r\n                  <tr key={index}>\r\n                    <td className=\"py-3 px-4 border-b\">{item.name}</td>\r\n                    <td className=\"py-3 px-4 border-b\">{item.food_item}</td>\r\n                    <td className=\"py-3 px-4 border-b\">{item.quantity}</td>\r\n                  </tr>\r\n                ))\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </section>\r\n\r\n      <footer className=\"bg-black text-white text-center text-sm py-6 px-4 mt-auto\">\r\n        <p>Boston University Center of Computing & Data Sciences: Duan Family Spark! Initiative</p>\r\n        <p>665 Commonwealth Ave., Boston, MA 02215 | Floor 2, Spark! Space</p>\r\n        <p>buspark@bu.edu</p>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["c","_c","Image","Link","useEffect","useState","supabase","useAdminGuard","EventOrganizer","$","$i","Symbol","for","loading","authorized","t0","rsvps","setRsvps","t1","t2","EventOrganizer[useEffect()]","loadRSVPs","data","error","from","select","console","t3","t4","t5","length","map","_EventOrganizerRsvpsMap","t6","t7","t8","item","index","name","food_item","quantity"],"mappings":";;;;;AAAa,SAAAA,CAAA,IAAAC,EAAA;AAIb,SAASG,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,QAAQ,QAAQ,sBAAsB;AAC/C,SAASC,aAAa,QAAQ,qBAAqB;;;AANnD,YAAY;;;;;AAQG;;IAAA,MAAAE,CAAA,OAAAR,8MAAA,EAAA;IAAA,IAAAQ,CAAA,CAAA,EAAA,KAAA,oEAAA;QAAA,IAAA,IAAAC,EAAA,GAAA,GAAAA,EAAA,GAAA,IAAAA,EAAA,IAAA,EAAA;YAAAD,CAAA,CAAAC,EAAA,CAAA,GAAAC,MAAA,CAAAC,GAAA,CAAA;QAAA;QAAAH,CAAA,CAAA,EAAA,GAAA;IAAA;IACb,MAAA,EAAAI,OAAA,EAAAC,UAAAA,EAAA;IAAgD,IAAAC,EAAA;IAAA,IAAAN,CAAA,CAAA,EAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;QAI9CG,EAAA,GAAA,EAAE;QAAAN,CAAA,CAAA,EAAA,GAAAM,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAN,CAAA,CAAA,EAAA;IAAA;IAFJ,MAAA,CAAAO,KAAA,EAAAC,QAAA,CAAA,OAA0BZ,uMAAQ,EAEhCU,EAAE,CAAC;IAAC,IAAAG,EAAA;IAAA,IAAAC,EAAA;IAAA,IAAAV,CAAA,CAAA,EAAA,KAAAK,UAAA,EAAA;QAEII,EAAA,GAAA,CAAA;YAAA,+BAAAE,CAAA;gBACR,IAAI,CAACN,UAAU,EAAA;oBAAA;gBAAA;gBAEf,MAAAO,SAAA,GAAA,eAAAA,UAAA;oBACE,MAAA,EAAAC,IAAA,EAAAC,KAAAA,EAAA,GAAwB,MAAMjB,yKAAQ,CAAAkB,IAC/B,CAAC,OAAO,CAAC,CAAAC,MACP,CAAC,2BAA2B,CAAC;oBAEtC,IAAIF,KAAK,EAAA;wBACPG,OAAO,CAAAH,KAAM,CAAC,sBAAsB,EAAEA,KAAK,CAAC;oBAAA,OAAA;wBAE5CN,QAAQ,CAACK,IAAU,IAAV,EAAU,CAAC;oBAAA;gBACrB,CACF;gBAEDD,SAAS,CAAC,CAAC;YAAA;SAAA,CAAA,CAAA,8BACZ;QAAEF,EAAA,GAAA;YAACL,UAAU;SAAC;QAAAL,CAAA,CAAA,EAAA,GAAAK,UAAA;QAAAL,CAAA,CAAA,EAAA,GAAAS,EAAA;QAAAT,CAAA,CAAA,EAAA,GAAAU,EAAA;IAAA,OAAA;QAAAD,EAAA,GAAAT,CAAA,CAAA,EAAA;QAAAU,EAAA,GAAAV,CAAA,CAAA,EAAA;IAAA;QAhBfL,wMAAS,EAACc,EAgBT,EAAEC,EAAY,CAAC;IAEhB,IAAIN,OAAO,EAAA;QAAA,IAAAc,EAAA;QAAA,IAAAlB,CAAA,CAAA,EAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;YAEPe,EAAA,iBAAA,2NAAA,GAEM;gBAFS,SAAkB,EAAlB,kBAAkB;0BAAC,gBAElC,EAFA,GAEM;;;;;;YAAAlB,CAAA,CAAA,EAAA,GAAAkB,EAAA;QAAA,OAAA;YAAAA,EAAA,GAAAlB,CAAA,CAAA,EAAA;QAAA;QAAA,OAFNkB,EAEM;IAAA;IAIV,IAAI,CAACb,UAAU,EAAA;QAAA,OAAS,IAAI;IAAA;IAAC,IAAAa,EAAA;IAAA,IAAAlB,CAAA,CAAA,EAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;QAKvBe,EAAA,iBAAA,2NAAA,EAEK;YAFS,SAAmD,EAAnD,mDAAmD;sBAAC,sBAElE,EAFA,EAEK;;;;;;QAAAlB,CAAA,CAAA,EAAA,GAAAkB,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAlB,CAAA,CAAA,EAAA;IAAA;IAAA,IAAAmB,EAAA;IAAA,IAAAnB,CAAA,CAAA,EAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;QAIDgB,EAAA,iBAAA,2NAAA,KAMQ;YANS,SAAa,EAAb,aAAa;oCAC5B,2NAAA,EAIK;;kCAHH,2NAAA,EAA0D;wBAA5C,SAAkC,EAAlC,kCAAkC;kCAAC,IAAI,EAArD,EAA0D;;;;;;kCAC1D,2NAAA,EAA+D;wBAAjD,SAAkC,EAAlC,kCAAkC;kCAAC,SAAS,EAA1D,EAA+D;;;;;;kCAC/D,2NAAA,EAA4D;wBAA9C,SAAkC,EAAlC,kCAAkC;kCAAC,MAAM,EAAvD,EAA4D,CAC9D,EAJA,EAIK,CACP,EANA,KAMQ;;;;;;;;;;;;;;;;;QAAAnB,CAAA,CAAA,EAAA,GAAAmB,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAnB,CAAA,CAAA,EAAA;IAAA;IAAA,IAAAoB,EAAA;IAAA,IAAApB,CAAA,CAAA,EAAA,KAAAO,KAAA,EAAA;QAGLa,EAAA,GAAAb,KAAK,CAAAc,MAAO,KAAK,CAcjB,iBAbC,2NAAA,EAIK;oCAHH,2NAAA,EAEK;gBAFS,SAAgC,EAAhC,gCAAgC;gBAAU,OAAC,CAAD,CAAA,EAAC;0BAAE,aAE3D,EAFA,EAEK,CACP,EAJA,EAIK,CASN;;;;;;;;;;mBAPCd,KAAK,CAAAe,GAAI,CAACC,uBAOZ,CAAC;QAAAvB,CAAA,CAAA,EAAA,GAAAO,KAAA;QAAAP,CAAA,CAAA,EAAA,GAAAoB,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAApB,CAAA,CAAA,EAAA;IAAA;IAAA,IAAAwB,EAAA;IAAA,IAAAxB,CAAA,CAAA,GAAA,KAAAoB,EAAA,EAAA;QA9BTI,EAAA,iBAAA,2NAAA,OAkCU;YAlCS,SAAsB,EAAtB,sBAAsB,CACvC;;gBAAAN,EAEI;8BAEJ,2NAAA,GA4BM;oBA5BS,SAA2E,EAA3E,2EAA2E;4CACxF,2NAAA,KA0BQ;wBA1BS,SAAoC,EAApC,oCAAoC,CACnD;;4BAAAC,EAMO;0CAEP,2NAAA,KAgBQ,CAfL;0CAAAC,EAcD,CACF,EAhBA,KAgBQ,CACV,EA1BA,KA0BQ,CACV,EA5BA,GA4BM,CACR,EAlCA,OAkCU;;;;;;;;;;;;;;;;;;;;;;;QAAApB,CAAA,CAAA,GAAA,GAAAoB,EAAA;QAAApB,CAAA,CAAA,GAAA,GAAAwB,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAxB,CAAA,CAAA,GAAA;IAAA;IAAA,IAAAyB,EAAA;IAAA,IAAAzB,CAAA,CAAA,GAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;QAEVsB,EAAA,iBAAA,2NAAA,MAIS;YAJS,SAA2D,EAA3D,2DAA2D;;8BAC3E,2NAAA,CAA2F,CAAxF;8BAAA,sFAAmF,CAAC,EAAvF,CAA2F;;;;;;8BAC3F,2NAAA,CAAsE;8BAAnE,+DAA+D,EAAlE,CAAsE;;;;;;8BACtE,2NAAA,CAAqB;8BAAlB,cAAc,EAAjB,CAAqB,CACvB,EAJA,MAIS;;;;;;;;;;;;QAAAzB,CAAA,CAAA,GAAA,GAAAyB,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAzB,CAAA,CAAA,GAAA;IAAA;IAAA,IAAA0B,EAAA;IAAA,IAAA1B,CAAA,CAAA,GAAA,KAAAwB,EAAA,EAAA;QAzCXE,EAAA,iBAAA,2NAAA,GA0CM;YA1CS,SAA4B,EAA5B,4BAA4B,CACzC;;gBAAAF,EAkCS,CAET;gBAAAC,EAIQ,CACV,EA1CA,GA0CM;;;;;;;QAAAzB,CAAA,CAAA,GAAA,GAAAwB,EAAA;QAAAxB,CAAA,CAAA,GAAA,GAAA0B,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAA1B,CAAA,CAAA,GAAA;IAAA;IAAA,OA1CN0B,EA0CM;AAAA;;;QA7EwB5B,6KAAa,CAAC,CAAC;;;KADlCC,eAAA;AAAA,SAAAwB,wBAAAI,IAAA,EAAAC,KAAA;IAAA,qBA6DG,2NAAA,EAIK,CAJIA,GAAK,CAALA;;0BACP,2NAAA,EAAmD;gBAArC,SAAoB,EAApB,oBAAoB,CAAE;0BAAAD,IAAI,CAAAE,IAAI,CAAE,EAA9C,EAAmD;;;;;;0BACnD,2NAAA,EAAwD;gBAA1C,SAAoB,EAApB,oBAAoB,CAAE;0BAAAF,IAAI,CAAAG,SAAS,CAAE,EAAnD,EAAwD;;;;;;0BACxD,2NAAA,EAAuD;gBAAzC,SAAoB,EAApB,oBAAoB,CAAE;0BAAAH,IAAI,CAAAI,QAAQ,CAAE,EAAlD,EAAuD,CACzD,EAJA,EAIK;;;;;;;OAJIH,KAAI,CAAC;;;;;AAIT","ignoreList":[],"debugId":null}}]
}